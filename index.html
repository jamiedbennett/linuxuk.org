<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title> LinuxUK &middot; LinuxUK </title>

  
  <link rel="stylesheet" href="http://www.linuxuk.org/css/poole.css">
  <link rel="stylesheet" href="http://www.linuxuk.org/css/syntax.css">
  <link rel="stylesheet" href="http://www.linuxuk.org/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">
  <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Lato">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.ico">

  
  <link href="http://www.linuxuk.org/index.xml" rel="alternate" type="application/rss+xml" title="LinuxUK" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2301466-2', 'auto');
  ga('send', 'pageview');

</script>
</head>

<body>

<div class="sidebar">
	<div class="container sidebar">
    <div class="sidebar-about">
      <h1>LinuxUK</h1>
      <p class="lead">
      Adventures in Software Engineering, Running, Vegan cooking, and other randomness
      </p>
    </div>

    <ul class="sidebar-nav">
      <a href="/">Home</a><br/> 
	  <a href="/about">About</a><br/>
	  <a href="/post">Archive</a><br/>
    </ul>
	<ul class="sidebar-social">
      <li><a href="https://twitter.com/jamiebennett"><img src="/images/twitter.png" /></a></li>
      <li><a href="https://uk.linkedin.com/in/jamiebennett"><img src="/images/linkedin.png" /></a></li>
      <li><a href="https://github.com/jamiedbennett"><img src="/images/github.png" /></a></li>
	  <li><a href="https://plus.google.com/u/0/&#43;JamieBennett09"><img src="/images/googleplus.png" /></a></li>
  	</ul>

    <ul class="sidebar-footnote">
    	&copy; 2016 Jamie Bennett. All rights reserved.
	</ul>

  </div>
</div>


	<div class="content container">
		<div class="posts">
			

			<div class="post">
				<h1 class="post-title">
					<a href="http://www.linuxuk.org/post/fixing_git_on_macOS_Sierra/">
						Fixing Git on MacOS X Sierra
					</a>
				</h1>

				<span class="post-date">Tue, Sep 13, 2016</span>

				<p>If, like me you have upgraded to the Mac OS X Sierra beta you may find that Git is broken from the command line. The error I was seeing was:</p>

<p><code>
xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun
</code></p>

<p>It turns out that the developer tools are borked on upgrade so need reinstalling. To do that you need to run:</p>

<p><code>
xcode-select &ndash;install
</code></p>

<p>After a short download and installation everything should be back to normal.</p>

			</div>
			

			<div class="post">
				<h1 class="post-title">
					<a href="http://www.linuxuk.org/post/cheddar_half_and_broadlands_10miler/">
						Cheddar Half Marathon and Broadlands 10 Miler
					</a>
				</h1>

				<span class="post-date">Fri, Jul 1, 2016</span>

				

<p><img align=“center” src="/media/broadlands.jpg">
A bit belated but here is a short report of two events I ran over the last month or so: the Keynsham 10 Miler and the Cheddar Gorge Half Marathon.</p>

<h2 id="keynsham-10-miler-10-miles-16-1-km:1c9cbdac9248dc68976d8b0e1965a3f4">Keynsham 10 Miler (10 miles, 16.1 km)</h2>

<p>This event was held on Sunday 22nd May in, you guessed it, Keynsham. The weather was fine although it had been raining the previous days which mean the largely undulating and off-road run was, muddy. Billed as a &ldquo;multi-terrain&rdquo; event the run took us down step and slippy hills (I clearly wore the wrong footware), over decrepit wooden styles, through long grass, up grueling inclines, and over foot-destroying loose stones; and then you do it again (its a two lap course). It was great. I must admit that due to a shoulder injury I picked up running trails in Salt Lake City my fitness has completely plummeted so this challenging off-road 10 miler took more out of me than I expected. Towards the 8 mile mark I was experiencing hamstring craps and at the end the pace slowed to a crawl. Despite all this I posted a respectable time and I will definitely be back again next year.</p>

<h2 id="cheddar-gorge-half-marathon-13-1-miles-21-1km:1c9cbdac9248dc68976d8b0e1965a3f4">Cheddar Gorge Half Marathon (13.1 miles, 21.1km)</h2>

<p>This was the second time I&rsquo;d ran in Cheddar this year, the first was for the <a href="http://www.linuxuk.org/post/20160410_cheddar_gorge_10k/">10km event</a>, and again the event was run to perfection. Tom and the team do an admirable job of ensuring the runners are registered quickly, drop their bags of easily, and are on the start line vaguely knowing where they are going. But the main actor in this event is the stunning scenery. Up on the top of Cheddar Gorge you get a great view of the surroundings and a glimpse of the pain to come. I started my Garmin on the walk to the start line this time and my watch read 528ft climbed, which is more than most complete marathons, and this was before the run itself!</p>

<p>Again the run was off-road, challenging, and &ldquo;undulating&rdquo;, but this time it was also cold, wet, and extremely muddy. Coupled with the lack of training this was probably my most challenging run this year. I took it easy on the first lap but with a 500ft climb in the middle, everything after that, whether it be flat, decline, or incline, gave my legs a bashing. A disappointing time (I was aiming for sub 2hrs and missed it) but a great day so overall a success. I&rsquo;ll be back again in a few weeks to complete the Cheddar Gorge challenge and look forward to running many more <a href="http://www.relishrunningraces.com">Relish Running</a> events next year.
<img align=“center” src="/media/cheddar_broadlands_medals.jpg"></p>

			</div>
			

			<div class="post">
				<h1 class="post-title">
					<a href="http://www.linuxuk.org/post/snap_try/">
						snap try: The quick way to package snaps
					</a>
				</h1>

				<span class="post-date">Fri, Jul 1, 2016</span>

				<p>This weeks snippet is all to do with improving the snap developer experience.</p>

<p>Since the release of snapd 2.0.8 we have added one of the most useful tools for snap developers:</p>

<p><code>snap try</code></p>

<p>What this does is effectively mounts any folder containing an unpackaged snap at <code>/snap/snapname</code> as a writeable folder allowing quick iteration during the packaging process. No longer do you have to create a read-only squashfs snap and install it to try out your latest changes and this speeds up the workflow tremendously. The process I use from the package directory is:</p>

<pre>
% snapcraft prime
% snap try prime
% /snap/bin/snapname
... test/hack ....
% snap remove <snapname>
</pre>

<p>When you are happy with your testing you can create the real snap file with:</p>

<pre>
% snapcraft
</pre>

<p>Happy snapping!</p>

			</div>
			

			<div class="post">
				<h1 class="post-title">
					<a href="http://www.linuxuk.org/post/cross-distro-snaps/">
						Are snaps really cross distro?
					</a>
				</h1>

				<span class="post-date">Thu, Jun 16, 2016</span>

				<p>Yesterday we announced the new home for everything snaps and Snapcraft, <a href="http://www.snapcraft.io">snapcraft.io</a>, and at the same time made available the cross-distribution work that really does means snaps can run on virtually any Linux distribution. Today we have enabled support for Debian, Arch, Gentoo, Fedora, and of course Ubuntu and all its flavours but enabling more including OpenSUSE, CentOS, Elementary, Mint, OpenWrt and others is in the works.</p>

<p>The announcements was met with a mostly positive response which, given that Linux packaging has been an issue for so many people and for so long, is hardly surprising. This particular problem has resulted in the community creating a few different initiatives such as AppImage and OrbitalApps, tackling the problem in different ways and all of which have their own merits and limitations. In my opinion (of course slightly biased but based on technical fact), snaps are the best solution for a complete cross-platform universal package format whether that be for the Linux desktop, IoT and mobile devices, or the server. Snaps are surprisingly easy to use, encompass industry-leading security with AppArmor, Seccomp filters, and more, and all with the very familiar and popular Ubuntu development workflow. A special mention has to go to the tooling as well; Snapcraft is already pretty awesome but week after week new features are being added to improve this further and snapd, the tool that runs snaps in a confined environment, is seeing so much innovative, open development that these two are great examples of projects to get your teeth into if you are a developer, tester, or just want to dabble in an open source project.</p>

<p>There has been some doubt that snaps really could run on multiple distributions and, as part of the team who tested this extensively, I can definitely confirm this is the case. I played around with several native installations and VMs over the course of last week and the results were super positive. As the saying goes, a picture is worth a thousand words so I took a couple of screenshots. Enjoy!</p>

<p><img align=“center” src="/media/snapd-cross-distro.png"></p>

			</div>
			

			<div class="post">
				<h1 class="post-title">
					<a href="http://www.linuxuk.org/post/contributing_to_snapd/">
						Contributing to the snapd project
					</a>
				</h1>

				<span class="post-date">Wed, Jun 1, 2016</span>

				

<p><img align=“center” src="/media/desktop.png"></p>

<p>There is a lot of buzz around snaps, the new packaging format created by Canonical to enable secure, transactional, and robust application updates, and rightly so. This new method of distributing applications is revolutionizing not only software on IoT devices, but on the desktop, server, and beyond. The software that actually runs the snap applications is called <code>snapd</code>. Hosted on <a href="https://github.com/snapcore/snapd">GitHub</a>, <code>snapd</code> uses the <a href="https://golang.org">Go language</a> and is actively developed by a core set of developers, but, like most projects at Canonical, we actively encourage as much community participation as possible. One of the core developers, Zygmunt, posted a great outline on <a href="http://www.zygoon.pl/2016/06/making-your-first-contribution-to-snapd.html">how to make your first contribution to snapd</a> and, taking up the challenge, I did exactly that.</p>

<p>Zygmunt&rsquo;s instructions are pretty clear but I thought I would look at this from a new developer&rsquo;s perspective, using a clean Ubuntu 16.04 install and with a new GitHub account. What follows is a guide to setting everything up ready for your first contribution. As a side note I have various machines I work on regularly, mainly my Lenovo laptop running Ubuntu, but also my Macbook Pro, and a HP Windows all-in-one. This allows me to look at the various platforms available to developers all of which are valid options for software development, especially in the IoT world.</p>

<h2 id="installing-ubuntu-16-04:fe302d14b47fc72325260d8f135290c5">Installing Ubuntu 16.04</h2>

<p>Installing Ubuntu is very straight-forward and, depending on the way you intend to run it, the instructions vary ever-so-slightly. There is a comprehensive guide to installing Ubuntu as the only OS available on the <a href="http://www.ubuntu.com/download/desktop/install-ubuntu-desktop">Ubuntu Site</a> which will get you up and running in no time. Remember to download Ubuntu 16.04. On the Mac and Windows platform you will need to install Ubuntu as a Virtual Machine (VM) but again, this is straight-forward. I chose to use <a href="https://www.virtualbox.org">VirtualBox</a> as it is free, feature-rich, and runs Ubuntu great; download it from the <a href="https://www.virtualbox.org/wiki/Downloads">website</a>. The Ubuntu Community is great when it comes to sharing information and there are already many tutorials on how to get an Ubuntu VM working. Although a few years old now, the answer on <a href="http://askubuntu.com/questions/142549/how-to-install-ubuntu-on-virtualbox">AskUbuntu</a> is still valid today and is worth reading after you have installed VirtualBox. I highly recommend you also install the <a href="https://www.virtualbox.org/wiki/Downloads">Guest Additions</a> iso to enable functionality such as drag and drop between host and guest, and window resizing.</p>

<p><img align=“center” src="/media/ubuntu-vm-mac.png"></p>

<p>There are a few extra packages you will need out-of-the-box for snapd development so once logged in to your shiny new Ubuntu install you will need to check for, and install, updates:</p>

<pre>
  sudo apt-get update
  sudo apt-get upgrade
</pre>

<p>In addition to the updates you will need to install <code>git</code>, <code>bzr</code>, <code>golang</code>, and it is useful to install <code>snapcraft</code> and <code>snapcraft-examples</code> for snapping applications later:</p>

<pre>
  sudo apt-get install git bzr golang snapcraft snapcraft-examples
</pre>

<p>So now you have Ubuntu on your development machine, what next?</p>

<h2 id="github:fe302d14b47fc72325260d8f135290c5">GitHub</h2>

<p>As stated previously, all <code>snapd</code> development occurs in GitHub. To be able to contribute to the project you will need a GitHub account so go ahead and create one. Fortunately GitHub&rsquo;s documentation is easy to follow so you will need to <a href="https://help.github.com/articles/signing-up-for-a-new-github-account/">sign up for a new account</a> - a free account is just fine, and follow that up by <a href="https://help.github.com/articles/set-up-git/">setting up Git</a>. We are going to be using ssh for cloning so <a href="https://help.github.com/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent">generating SSH keys</a> is also needed but if this is a little too scary you can use the <a href="https://help.github.com/articles/which-remote-url-should-i-use/#cloning-with-https-urls-recommended">HTTPS method</a> instead, just be aware that instructions further down and in Zygmunt&rsquo;s post will need to be modified slightly but I&rsquo;ll point that out. For reference there is a good <a href="[Git Cheatsheet](https://services.github.com/kit/downloads/github-git-cheat-sheet.pdf">Git cheatsheet</a> available from GitHub that is worth looking at.</p>

<p>Now we have a working Ubuntu install, Git and GitHub all set up, it is time to get developing.</p>

<h2 id="snapd-development:fe302d14b47fc72325260d8f135290c5">snapd development</h2>

<p>Fortunately Zygmunt has this bit covered. He has a <a href="http://www.zygoon.pl/2016/06/making-your-first-contribution-to-snapd.html">great tutorial</a> on how to fork the <code>snapd</code> project in GitHub (just go to the project and click the Fork button in the top-right corner) and set up the GO environment variables ready for development. I highly recommend using the same directory structure as Zygmunt (mine is <code>~/development/src/github.com/snapcore/snapd</code> for <code>snapd</code>) as this allows you to use his very useful <code>devtools</code> branch for useful helper functions and make sure you run the <code>get-deps.sh</code> script in the <code>snapd</code> directory to ensure you have everything set up correctly. Make sure to also get the <code>devtools</code> branch with a </code>git clone</code> and have this ready somewhere in your development directory outside of the snapd directory.</p>

<pre>
  git clone git@github.com:zyga/devtools
</pre>

<p><img align=“center” src="/media/snapd-refresh-bits.png"></p>

<p>Development workflow is particularly nice. You hack on the code, run the tests, refresh the <code>snapd</code> code with your changes, and test them manually. The <code>refresh-bits</code> script from <code>devtools</code> starts up a separate instance of <code>snapd</code> with your changes and allows you to install snaps and test your code without affecting the host system. On my system this looks something like this (expanded a little for clarity):</p>

<pre>
cd ~/development/src/github.com/snapcore/snapd
** hack, hack, hack **
./run-checks
** iterate until the tests are happy **
cd ~/development/src/github.com/devtools
./refresh-bits snap snapd setup run-snapd restore
** open second terminal and test changes **
</pre>

<h2 id="whats-next:fe302d14b47fc72325260d8f135290c5">Whats next?</h2>

<p>Well that bit is easy, talk to the developers on <a href="https://webchat.freenode.net/?channels=snappy">irc</a>, sign up to the <a href="https://lists.ubuntu.com/mailman/listinfo/snapcraft">mailing list</a>, go find a <a href="https://bugs.launchpad.net/snappy">bug to fix</a>, but most importantly, get involved!</p>

			</div>
			

			<div class="post">
				<h1 class="post-title">
					<a href="http://www.linuxuk.org/post/20160518_snapping_electron_based_applications_simplenote/">
						Snapping an Electron-based Application: Simplenote
					</a>
				</h1>

				<span class="post-date">Wed, May 18, 2016</span>

				

<p><img align=“center” src="/media/simplenote.jpg"></p>

<p><a href="https://github.com/ubuntu-core/snapcraft/blob/master/README.md">Snapcraft</a> is described as a <strong><em>“delightful packaging tool”</em></strong>, enabling a developer to package their app from a single tree by aggregating the pieces from multiple places if necessary. It supports multiple build technologies and produces a .snap package with all its dependencies for Ubuntu Core and now the Ubuntu Classic Desktop (using snapd). It is the future of packaging for Linux-based systems. I encourage the reader to read the documentation on GitHub to get a flavour of what Snapcraft is and to learn more about the key concepts, setting up your system to produce snaps, and a nice first snap walkthrough example. For this post I am going to introduce a couple of concepts that served me well when snapping the <a href="http://electron.atom.io">Electron-based</a> application, <a href="https://simplenote.com">Simplenote</a>.</p>

<h2 id="simplenote:4408236ccc10409f19576a02bb19af53">Simplenote</h2>

<p>Simplenote is a cross-platform note-taking application that uses <a href="https://simperium.com">Simperium</a> to sync notes across Android, iOS, Mac, and of course Ubuntu (and other Linux systems). It has support for instant search, tags, note sharing, backups, and best of all it is free. This makes Simplenote a great choice if, like me, you use several systems on a daily basis.</p>

<p>Snapping Simplenote is relatively straight-forward but as I walk through the process below there are a few concepts that could help others snap applications. The rest of this post assumes you are using an Ubuntu 16.04-based system (VM, PC) and have installed snapcraft as per the instructions on the GitHub page.</p>

<h2 id="snapcraft:4408236ccc10409f19576a02bb19af53">Snapcraft</h2>

<p>First we need to get the latest version of Simplenote from GitHub, at time of writing this was 1.0.1.</p>

<pre>
  wget https://github.com/Automattic/simplenote-electron/releases/download/v1.0.1/Simplenote-linux-x64.1.0.1.tar.gz
  tar xvzf Simplenote-linux-x64.1.0.1.tar.gz
</pre>

<p>Then we need to create our initial <code>snapcraft.yaml</code> file in the Simplenote directory to tell Snapcraft how to package the application.</p>

<pre>
  cd Simplenote-linux-x64
  snapcraft init
</pre>

<p>Running <code>snapcraft init</code> creates a barebones file ready for editing. For Simplenote you need the following, don’t worry about the contents just yet, I will point out the important bits soon.</p>

<pre>
name: simplenote
version: 1.0.1
summary: The simplest way to keep notes.
description: The simplest way to keep notes. Light, clean, and free.
apps:
  simplenote:
    command: wrapper
    plugs: [unity7, opengl, network]
parts:
  simplenote:
    plugin: copy
    stage-packages:
      - libnss3
      - fontconfig-config
      - gnome-themes-standard
    files:
      Simplenote: Simplenote
      wrapper: usr/bin/wrapper
      icudtl.dat: icudtl.dat
      snapshot_blob.bin: snapshot_blob.bin
      natives_blob.bin: natives_blob.bin
      resources*: resources
      libnode.so: usr/lib/x86_64-linux-gnu/libnode.so
      libffmpeg.so: usr/lib/x86_64-linux-gnu/libffmpeg.so
</pre>

<p>The first 4 lines of the file are there to describe details about the package itself including the name, version number, and a plain text summary and description. After that we get on to the sections that describe how the application is executed and what features it needs from the underlying system. <code>command</code> is the command to run on execution and <code>plugs</code> tells the system that this application wants to use the <code>unity7</code>, <code>opengl</code>, and <code>network</code> interfaces - all mandatory for Simplenote. You can read more about interfaces in Zygmunt’s series of <a href="http://www.zygoon.pl/2016/04/snappy-snapcraft-and-interfaces.html">interface articles</a>.</p>

<p>As a side note, the command entry is a little different for this application as Simplenote (and other Electron-based apps) need a few environment variables set up before the actual binary can be called. This is accomplished by creating a wrapper script that does this set up. The contents of the wrapper file can be seen later in this post.</p>

<p>Back to the <code>snapcraft.yaml</code> file. The <code>parts</code> section describes what Snapcraft needs to do when creating the the <code>.snap</code> package. In this case we rely on the <code>copy</code> plugin that enables, you guessed it, copying of files from the host system during packaging to the snap package. The actual files to copy are listed in the <code>files</code> section. This copying is done to ensure that Simplenote has all the libraries and binary blobs necessary to execute once mounted within it’s snap-based confined area, running on a Snappy system. The format is:</p>

<pre>file_to_copy: destination_in_the_snap</pre>

<p>One entry that sticks out a little is the resources line:</p>

<pre>resources*: resources</pre>

<p>The use of the globbing wildcard ‘<code>*</code>’ ensures that the whole resources directory is copied across.</p>

<p>One section we skipped over was <code>stage-packages</code>. Snapcraft is a very clever tool and we benefit from it’s knowledge of Debian-based packages by stating in this section that we want to install <code>libnss3</code>, <code>fontconfig-config</code>, and <code>gnome-themes-standard</code> from the Ubuntu archive into the snap; again these are required packages for Simplenote.</p>

<p>Another side note. To understand what libraries are required by a binary like Simplenote we can use the ldd command:</p>

<pre>ldd Simplenote</pre>

<p>This produces an output that can be studied to understand where the binary is looking for its dependencies. Simplenote comes with a couple of libraries embedded in the package, namely <code>libnode.so</code> and <code>libffmpeg.so</code> and ldd shows these on my system as:</p>

<pre>
libnode.so => /home/jamie/snapping/simplenote/Simplenote-linux-x64/./libnode.so (0x00007fa6caa85000)
libffmpeg.so => /home/jamie/snapping/simplenote/Simplenote-linux-x64/./libffmpeg.so (0x00007fa6c5801000)
</pre>

<p>Notice that the entry after ‘<code>=&gt;</code>’ points to local .so files in the <code>Simplenote-linux-x64</code> directory, this means that we need to copy these over into the snap, hence the <code>copy</code> entry in the <code>snapcraft.yaml</code> file. All other libraries are present on the host system and will be used automatically by Snapcraft.</p>

<h2 id="the-code-wrapper-code-file:4408236ccc10409f19576a02bb19af53">The <code>wrapper</code> file</h2>

<p>The contents of the wrapper file discussed above are:</p>

<pre>
#!/bin/sh
export FONTCONFIG_PATH=$SNAP/etc/fonts
export FONTCONFIG_FILE=$SNAP/etc/fonts/fonts.conf
export XDG_DATA_HOME=$SNAP/usr/share
export LD_LIBRARY_PATH=$SNAP_LIBRARY_PATH:$SNAP/usr/lib/x86_64-linux-gnu/
exec "$SNAP/Simplenote" "$@"
</pre>

<p>There is nothing too exciting about this file, we set up the fonts path to be inside the snap directory itself (remember snaps are confined) as well as the share folder. We also set the <code>LD_LIBRARY_PATH</code> to ensure that the snap is looking for it’s libraries in the right location, namely <code>$SNAP/usr/lib/x86_64-linux-gnu/</code>. Again, looking at the <code>snapcraft.yaml</code> file you can see that we copy <code>libnode.so</code> and <code>libffmpeg.so</code> here to ensure Simplenote does not complain about missing libs. The last line executes the Simplenote binary.</p>

<p>The wrapper file needs to be executable so we do this using the chmod command:</p>

<pre>
  chmod +x wrapper
</pre>

<h2 id="building-and-installing:4408236ccc10409f19576a02bb19af53">Building and Installing</h2>

<p>All that is left to do is build and install the snap.</p>

<pre>
  snapcraft
  sudo snap install simplenote_1.0.1_amd64.snap
</pre>

<p>This process will pull down any dependencies and create the squashfs-based <code>.snap</code> file. After this we should have a <code>simplenote_1.0.1_amd64.snap</code> file in the local directory ready to be installed with the <code>snap install</code> command. One caveat at the moment is that Simplenote will expect to use <code>dbus</code> and with AppArmor confinement this is not possible with the application we just built. It is possible to get around this but I will leave that as an exercise for a later post.</p>

<p>If you try to run the application using:</p>

<pre>
  simplenote
</pre>

<p>You will see the following:</p>

<p><img align=“center” src="/media/simplenote_apparmor_error.jpg"></p>

<p>What we can do, which introduces a new concept nicely, is use <code>—devmode</code>. devmode allows the snap to break out of it’s confinement during development to quickly get up and running. From there you can look at what policy violations would potentially occur and adjust your application accordingly. When you are happy that your application is working in a confined environment you can simply install without devmode to test.</p>

<p>To install Simplenote with devmode you can use the <code>—devmode</code> flag:</p>

<pre>
  sudo snap install —devmode simplenote_1.0.1.snap
</pre>

<p>Running <code>simplenote</code> now produces the following:</p>

<p><img align=“centre” src="/media/simplenote_login.jpg"></p>

<p>It is not perfect but that wasn’t the aim of this post. Instead we looked at packaging an application, copying files inside the snap using <code>copy</code>, using a wrapper file to set up a snap environment, and now to conclude lets introduce another little snippet of information to help you debug your snapping process: <code>busybox</code>.</p>

<h2 id="debugging-snaps-using-code-busybox-code:4408236ccc10409f19576a02bb19af53">Debugging snaps using <code>busybox</code></h2>

<p>Snapping an application is usually pretty simple but when you get stuck and just need to look inside the snap itself to see what is going on there is a simple trick to allow you to do this. Adding <code>busybox</code> as an application to your snap gives you to have a shell environment right there in the snap. This allows you to poke and prod at directories, seeing if files you thought you copied over are present, and generally debugging (you can also add <code>gdb</code> and other tools if necessary in the same way).</p>

<p>To add <code>busybox</code> we would modify the <code>snapcraft.yaml</code> file above as follows:</p>

<pre>
name: simplenote
version: 1.0.1
summary: The simplest way to keep notes.
description: The simplest way to keep notes. Light, clean, and free.
apps:
  simplenote:
    command: wrapper
    plugs: [unity7, opengl, network]
  busy box:
    command: sh
    plugs: [unity7, opengl, network]
parts:
  simplenote:
    plugin: copy
    stage-packages:
      - libnss3
      - fontconfig-config
      - gnome-themes-standard
    files:
      Simplenote: Simplenote
      wrapper: usr/bin/wrapper
  busybox:
    plugin: nil
    stage-packages:
      - busybox
</pre>

<p>Notice the extra busybox-related lines. To access <code>busybox</code> once the snap is installed you can use:</p>

<pre>
  simplenote.busybox
</pre>

<p>Important directories are:
<pre>
$SNAP - the snaps home directory i.e. /snap/simplenote/id
$SNAP_DATA - the snaps data directory in var i.e. /var/snap/simplenote/id
$SNAP_USER_DATA - the snaps user data directory i.e. /home/jamie/snap/simplenote/id
</pre></p>

<p>All of the above directories are on a Classic 16.04 Ubuntu system.</p>

<p>All code can be found at:</p>

<ul>
<li><a href="https://github.com/jamiedbennett/snaps/tree/master/simplenote">https://github.com/jamiedbennett/snaps/tree/master/simplenote</a></li>
</ul>

<p>The next steps for this application are to sort out the fonts and menu spacing, add a <code>.desktop</code> file for dash discovery, get around the AppArmor violation, and upload to the store, but all of this is for another post.</p>

			</div>
			

			<div class="post">
				<h1 class="post-title">
					<a href="http://www.linuxuk.org/post/20160424_pensford10k/">
						The Pensford 10k
					</a>
				</h1>

				<span class="post-date">Sun, Apr 24, 2016</span>

				<p><img align="right" src="/media/pensford_medal.jpg"></p>

<p>Another week, another race, this time the Pensford 10k event, but lets take a little step back first.</p>

<p>At the beginning of my &lsquo;racing&rsquo; (very loose term for official events) calendar selection I had the aim of adding at least one, preferably two events per month to ensure that the pressure to line up against others kept me honest and provided the motivation to get my backside off the couch and training. When the event is close by and offers an &ldquo;undulating, and seldom flat course&rdquo; with a nice 50m and 100m steep climb in the middle, it is worth a try, and try I did.</p>

<p>Race day I lined up with nearly 200 other people, but amongst the normal pre-race banter I was hearing whispers from the more experienced runners: &lsquo;it only gets going around the 5k mark, watch out&rsquo;, and &lsquo;the hill in the middle is a killer&rsquo;. With this in mind, I moved myself from the 40min+ starting group to the 50min+ group all whilst I was wondering what I had gotten myself in to.</p>

<p>I set off at a slow but steady pace, trying to conserve energy for &lsquo;the hills&rsquo; although at this point I was overtaking people in the faster group which had me a little worried. Despite a few hills the first 5k was fine, up, down, up, down, and up again but rather doable. Then the 5k marker appeared and right on cue, the hill that was the focus of many a conversation at the start of the race.</p>

<p>Now, a 100m climb sounds rather small, and on paper it is, but when you are trying for a good race time, with tired legs, a dislocated shoulder (did I mention that?) and enjoying the best the South West has to offer you in terms of windy, cold weather, the start of this tiny little hill was not welcome. I&rsquo;d set my Garmin watch to alert me when I was slower than an 8:30 pace thinking me and the beep were never going to meet but unfortunately the slow beep was my unwelcome companion the whole time I climbed this section.</p>

<p>Despite a slow time (51:27) I really did enjoy it. I am confident I could knock a large chunk of time off that next time, in good health, and with next year being the 30th anniversary of the race, I think I will be back to prove that.</p>

<p>Next on the agenda, the Keynsham 10 miler but I am sorely tempted to add the Bath Ultra Marathon in September to the list, after all, I&rsquo;m still looking for races.</p>

			</div>
			

			<div class="post">
				<h1 class="post-title">
					<a href="http://www.linuxuk.org/post/20160410_cheddar_gorge_10k/">
						Running the Cheddar Gorge 10k
					</a>
				</h1>

				<span class="post-date">Mon, Apr 11, 2016</span>

				<p><img src="/media/cheddar_10k1.jpg">
This week I ran the 2016 inaugural Cheddar Gorge Challenge event, the 10k race. Billed as a &lsquo;lumpy course&rsquo; these series of runs offer &ldquo;more climbing just getting to the start than you will in most other events&rdquo;. With the affectionately named Hell Steps towards the end this is a tough run but more importantly, it is a fun event. Cheddar is beautiful, steeped in history and picturesque from the bottom of the gorge let alone from running up and down it so the prospect of completing 3 races (10k, half marathon, and marathon) in and around the area was too enticing to pass up.</p>

<p><img align="left" src="/media/cheddar_10k2.jpg">
The terrain, according to the <a href="http://www.relishrunningraces.com/cheddar-gorge-challenge.php">website</a> is &ldquo;steep in places and very steep everywhere else&rdquo; which sets the scene but to be honest I arrived at the event fully trained but expecting the worse. In reality there were hard sections, easy sections, a little doubt that I could actually complete the event around the 5k mark, and a &lsquo;this is great&rsquo; moment around 7k. The distance is tiny compared to the training I have done but it was a combination of the race-day &lsquo;too fast start pace&rsquo; and the lumpiness that hit my tired legs hard. There was never a time that I truly wanted to give up but there were times when I thought about a brisk walk rather than running. Overall I am happy to say that even up the Hell Steps I broke into a run and completed the course in a not impressive, but rewarding <a href="https://www.strava.com/activities/541134242">58:28</a>. I quietly wanted a sub-1hr finish but given the course I was a little sceptical about that but even though the wind was against us most of the race (how does it constantly blow directly at you regardless of your orientation?) I hit my goal.</p>

<p><img align="right" src="/media/cheddar_10k3.jpg">
So why would I put my body through this I hear you ask. Well, this year I am doing something out of my comfort zone, something a little crazy (for me), and something that I hope will make a difference to others. This year I am running, a lot, and for a good reason. This year I am running to raise money for <a href="http://www.macmillan.org.uk/">MacMillan Cancer Support</a>. To read about my story please click the <a href="https://www.justgiving.com/JamieBennettRuns">link</a> which is also where you can donate to this very worthy cause. I am putting myself through several challenges, including a marathon in the Himalayas of Nepal and a 45 mile Ultra Marathon because there are people out there who just can&rsquo;t, so lets together make their lives a little easier during a really hard time.</p>

<p>So if you can, please <a href="https://www.justgiving.com/JamieBennettRuns">donate</a>.</p>

			</div>
			

			<div class="post">
				<h1 class="post-title">
					<a href="http://www.linuxuk.org/post/20160404-a-change-of-scenery/">
						A Change of Scenery
					</a>
				</h1>

				<span class="post-date">Wed, Apr 6, 2016</span>

				<p>A few weeks I joined <a href="http://www.canonical.com">Canonical</a> and for the eagle-eyed you&rsquo;d realise this is actually for the second time. Previously at Canonical I spent my days with the Mobile Team, realising the goal of a good Linux on ARM experience which eventually culminated in the foundation of <a href="http://www.linaro.org">Linaro</a>. This time I am equally excited about another formative stage of technology, that of IoT and the possibilities of interoperable and extensible devices running a standard Linux operating system.</p>

<p>I personally will be working directly on Snappy Core, the technology used to provide a stable, secure, transactional, and featureful platform for the internet of things (IoT) and beyond. I believe in the future of IoT, big data, and a world full of Mark Weiser&rsquo;s vision of <a href="http://www.ubiq.com/hypertext/weiser/UbiHome.html">Ubiquitous Computing</a> and I am excited to be part of it.</p>

			</div>
			

			<div class="post">
				<h1 class="post-title">
					<a href="http://www.linuxuk.org/post/20160221_running_in_nepal/">
						Running in Nepal
					</a>
				</h1>

				<span class="post-date">Sun, Feb 21, 2016</span>

				<p><img align="right" src="/media/nepal_guide_kindle.png" title="Lonely Planet Guide to Nepal">
Nepal is such a wonderful place. Steeped in history and culture with some of the most breath-taking sights to be seen, Nepal is the home to Buddhism, the Himalayas, and of course the mighty Mt Everest. Despite all this wealth, the country and the people themselves face a lot of challenges. Economically Nepal is considered a third-world country with many people in utter poverty. To compound this hardship, Nepal has also experienced terrible earthquakes that have left many dead and even more without basic needs such as accommodation, access to food and clean water, and education. Last years earthquakes were terrible and it <a href="http://earthquaketrack.com/p/nepal/recent">continues to happen</a>. This had me thinking, wouldn’t it be great if I could do something, no matter how small, to help out in some way?</p>

<p>Through my love of running I got to learn about the Impact series of Marathons and right there as the inaugural run was <a href="http://nepalmarathon.co.uk">Nepal</a>. Impact Marathons has lofty goals, in fact they are aiming to contribute to the 17 UN Global Goals through running. <em>“Our runners will truly see the impact of their time, money and resources by visiting and meeting all of the projects they are supporting”</em>. As part of the week long trip we will be helping repair a school that was badly affected by the earthquake as well as undertaking other community projects. The actually marathon will be at the end of the week and promises to combine stunning views, up to 2300m of altitude, and 26.2 miles of running for a great cause. I am really looking forward to it.</p>

<p>This year I am hoping to complete several new challenges and up my running to ultra distances. At the moment, Nepal is my final planned race of the year but between now and then there is a lot of training to do.</p>

			</div>
			

			<div class="post">
				<h1 class="post-title">
					<a href="http://www.linuxuk.org/post/20160123_parkrun/">
						Parkrun
					</a>
				</h1>

				<span class="post-date">Tue, Jan 19, 2016</span>

				<p><img align="centre" src="/media/running-mud.png" title="A wet and muddy Park Run">
I have a confession to make. While I have publicly supported the <a href="http://www.parkrun.com/">parkrun</a> initiative for some time and I wholeheartedly believe it is a great idea, I have never actually ran one myself. There have been many excuses from family conflicts at the weekends to blaming the weather but this week I thought I would actually ignore all of this and partake in the spectacle. I chose the closest event, which for me was <a href="http://www.parkrun.org.uk/southwickcountrypark/course/">Southwick Country Park</a> in Trowbridge and arrived before the customary 9am start time. Nearly 300 people turned up to run the wet and muddy course and despite not knowing anything about the logistics of Park Run (you pick up a finishing token at the end and have that scanned with your personal parkrun barcode) I mingled into the crowd ready to run.</p>

<p>The course itself was great. 3 laps around a semi-gravelled path with some sections completely covered by 6 inches of rain water. The first lap around I tried to avoid the water but this this only pushed you onto the slippery surrounding mud so for lap 2 and 3 it became obvious that the best option was to just get your feet wet.</p>

<p>I did not manage any personal bests but that was not the point; the event itself was great fun and the volunteers were excellent. This may have been my first parkrun but it is definitely not my last, I will be there again this Saturday, 9am, ready to do it all again.</p>

<p><img align="centre" src="/media/park-run-southwick.png" title="Southwick Park Run"></p>

			</div>
			

			<div class="post">
				<h1 class="post-title">
					<a href="http://www.linuxuk.org/post/20151230_scansnap1300i_ubuntu/">
						Fujitsu SnapScan 1300i with Ubuntu
					</a>
				</h1>

				<span class="post-date">Wed, Dec 30, 2015</span>

				<p>I&rsquo;ve been using the <a href="http://www.fujitsu.com/uk/products/computing/peripheral/scanners/scansnap/s1300i/">Fujitsu ScanSnap 1300i</a> on Mac OS X for some time now in the pursuit of a paperless life but now that I am using Ubuntu more and more it was apparent that I was going to have to get this little scanner working on Linux. Searching the internet threw up a few interesting articles but nothing worked 100%. In the end the steps I used under Ubuntu 15.10 were:</p>

<p>Install <strong><em>sane</em></strong> and <strong><em>gscan2pdf</em></strong>:</p>

<pre><code>$ sudo apt-get install sane gscan2pdf
</code></pre>

<p>Download the scanner firmware from <a href="http://www.openfusion.net/public/files/1300i_0D12.nal">http://www.openfusion.net/public/files/1300i_0D12.nal</a> copy it to the relevant directory:</p>

<pre><code>$ wget http://www.openfusion.net/public/files/1300i_0D12.nal &amp;&amp; sudo mkdir /usr/share/sane/epjitsu &amp;&amp; sudo cp 1300i_0D12.nal /usr/share/sane/epjitsu
</code></pre>

<p>Open up the scanner lid first then initialise it with:</p>

<pre><code>$ sudo scanimage -L
</code></pre>

<p>Run the gscan2pdf application:</p>

<pre><code>$ gscan2pdf
</code></pre>

<p>You can tweak some of the scanner options by clicking the scan button and playing around with the pop-up box tabs. For me the most important were to select duplex as I regularly scan double-sided documents and to select colour.</p>

<p>Happy scanning.</p>

			</div>
			

			<div class="post">
				<h1 class="post-title">
					<a href="http://www.linuxuk.org/post/2015-11-09_Running_Ubuntu_Snappy_On_OSX_VirtualBox/">
						Running Ubuntu Snappy Core Virtualised on Mac OSX
					</a>
				</h1>

				<span class="post-date">Mon, Nov 9, 2015</span>

				<p>Although most of the documentation out there today shows you how to run Ubuntu Snappy Core on an Ubuntu desktop, it is also pretty simple to do this on Mac OSX. In short:</p>

<p>Download the Ubuntu Snappy Core image from:</p>

<pre><code>http://releases.ubuntu.com/15.04/
</code></pre>

<p>You will need the amd64 version of Snappy.</p>

<p>Unarchive the file:</p>

<pre><code>unxz ubuntu-15.04-snappy-amd64-generic.img.xz 
</code></pre>

<p>Then convert the image into something that VirtualBox can run:</p>

<pre><code>qemu-img convert -f raw -O vmdk ubuntu-15.04-snappy-amd64-generic.img ubuntu-15.04-snappy-amd64-rpi2.vmdk
</code></pre>

<p>At this point you want to create a new VM with VirtualBox. Make sure you create a Linux Ubuntu image but when you get to the Hard drive section select &ldquo;Use an existing virtual hard drive file&rdquo;. Navigate to your .vmdk image and click create. Now, when you start the VM you should be greated (pretty quickly) with the login prompt from Snappy.</p>

<div align="center">
<img src="/media/virtualbox.jpg" title="VirtualBox">
</div>

			</div>
			

			<div class="post">
				<h1 class="post-title">
					<a href="http://www.linuxuk.org/post/20151106-ubuntu-snappy-with-mac/">
						Installing Ubuntu Snappy Core on a Rasberry Pi 2 using a Mac
					</a>
				</h1>

				<span class="post-date">Fri, Nov 6, 2015</span>

				<p>This is a short guide to installing Ubuntu Snappy Core on a Rasberry Pi 2 using a Mac. It is pretty straight-forward but there are a couple of areas where you can get caught out.</p>

<p>First, download the Ubuntu Snappy image from:</p>

<ul>
<li><a href="http://people.canonical.com/%7Eplatform/snappy/raspberrypi2/">http://people.canonical.com/%7Eplatform/snappy/raspberrypi2/</a></li>
</ul>

<p>As of writing the latest release was:</p>

<ul>
<li>ubuntu-15.04-snappy-armhf-rpi2.img.xz</li>
</ul>

<p>Insert your SD card if you haven&rsquo;t done so already and use <strong>diskutil</strong> to find it.</p>

<pre><code>$ diskutil list
</code></pre>

<p>Make sure you are confident that you know exact which disk is your SD card before proceeding. The relevant part of my output was:</p>

<pre><code>/dev/disk4 (external, physical):
#:                       TYPE NAME                    SIZE       IDENTIFIER
0:     FDisk_partition_scheme                        31.9 GB     disk4
1:                  Windows_FAT_32 Untitled          31.9 GB     disk4s1
</code></pre>

<p>Umount the disk with:</p>

<pre><code>diskutil unmountDisk /dev/disk4
</code></pre>

<p>Then proceed to write your Ubuntu image to the card with:</p>

<pre><code>$ unxz -c ubuntu-15.04-snappy-armhf-rpi2.img.xz | sudo dd of=/dev/rdisk4 bs=32m &amp;&amp; sync
</code></pre>

<p>Notice the use of &lsquo;r&rsquo; in front of the /dev/disk4 file.</p>

<p>Thats all there is to it. Pop the SD card into your Rasberry Pi 2 and start using Ubuntu Snappy Core.</p>

<div align="center">
<img src="/media/rpi2.jpg" title="Rasberry Pi 2">
</div>

			</div>
			

			<div class="post">
				<h1 class="post-title">
					<a href="http://www.linuxuk.org/post/20150819-life-with-apples-iwatch/">
						Life with Apple&#39;s iWatch
					</a>
				</h1>

				<span class="post-date">Wed, Aug 19, 2015</span>

				<p><img align="right" src="/media/apple-iwatch.jpg" title="Apple iWatch">
I confess, I’m a bit of a gadget hound. I own four different smart watches all with different OSs:</p>

<ul>
<li>Pebble with PebbleOS</li>
<li>Samsung Gear with Tizen</li>
<li>Motorola 360 with Android Wear</li>
<li>and now Apple iWatch with WatchOS</li>
</ul>

<p>When I first got the Pebble (Kickstarter model) I was instantly impressed. It was a device that lasted days, gave me notifications at a glance, and allowed me keep my phone in my pocket unless it was really needed. The trouble is that I got bored pretty quickly with it’s lack of functionality and the Samsung Gear looked enticing. With the ability to make calls, as well everything the Pebble did and more, it seemed like a no brainer. It originally came with a version of Android so buggy it made the device pretty much unusable. Much later this was ‘upgraded’ to a Tizen OS which to its credit was better, but was still limited. Enter Android Wear. In a blaze of publicity at Google I/O 2014 this wearable OS seemed perfect, so I went and purchased the Motorola 360, arguably the best looking device on the market. Unfortunately, this was also crippled. No sound (so no beeps, no notification noises), no ability to make and receive calls, and more importantly no real way to get back to notifications once they were dismissed as well as no real compelling stock applications, this watch just felt like a device to vibrate every time something happened and to ignore at all other times. Android Wear just wasn’t compelling enough so I always gravitated back to Garmin watches (Forerunner 620, Forerunner 920t). Now there is the Apple Watch.</p>

<p>I’m still in the honeymoon stages with it at the moment but I have been wearing it exclusively for the past three weeks. It’s proven to be a useful aid: the fitness app is a bit poor and I’ll revisit this point in another blog post but overall the experience of using it has been pleasant. I can read messages and email, make and receive calls, the calendar app is super useful, and I’ve found that I use it extensively for reminders. All in all it has been a success so far but it is not without its problems. Watch OS 2.0 promises to improve the device further and I am certainly looking forward to it but for now, the iWatch is the best smart watch in an immature market.</p>

			</div>
			

			<div class="post">
				<h1 class="post-title">
					<a href="http://www.linuxuk.org/post/20150810-humans/">
						Humans
					</a>
				</h1>

				<span class="post-date">Mon, Aug 10, 2015</span>

				<p><img align="right" src="/media/humans.jpg" title="AMC's Humans"></p>

<p>As a scholar of software engineering with a particular interest in the field of ubiquitous computing and artificial intelligence, the recent series by AMC, “Humans” really did peak my interest. Is it something based on sensationalism or alternatively something that could be considered grounded in reality? Well, I believe that it is a drama that reflects more on the latter than the former. I really like the concept so far and it raises questions that only academia have explored in detail before movie studios love; concepts such as artificial understanding, consciousness, love, and the projection of human traits upon non-human subjects (anthropomorphism).</p>

<p>Sure, the movie industry have toyed with a multitude of these concepts with many dollars flowing in at the box office but what Humans does is ground these in such mundaneness, run of the mill reality, that I really like the play with boundaries, the grey line that the whole programme is toying with. What defines humanity and what distinguishes it from an imposter? What is the point in humans learning when machines can do it much better? Maybe more importantly do the majority of people, the Joe Bloggs of the world, care about the gap in what is possible with strong AI and what is human; a posit that I believe will be in the forefront of minds for the next 50 years.</p>

<p>In short, I really do like Humans so far.</p>

			</div>
			

			<div class="post">
				<h1 class="post-title">
					<a href="http://www.linuxuk.org/post/20150327-creating-bootable-usb-images-on-mac/">
						Creating bootable USB images on the Mac
					</a>
				</h1>

				<span class="post-date">Fri, Mar 27, 2015</span>

				<p>Creating a bootable image for installing a Linux OS is pretty straight-forward but when you are doing this on the Mac there is a specific way it needs to be done. I alway use USB drives for this purpose so what follows are the steps needed to create a bootable USB stick from a Linux .iso image.</p>

<p>I presume you have already downloaded your favourate Linux distribution in .iso format, below I&rsquo;m using Debian Jessie.</p>

<p>First conver the .iso image into a .img image.</p>

<pre><code>$ hdiutil convert -format UDRW -o debian-jessie-DI-rc1-amd64-netinst.img debian-jessie-DI-rc1-amd64-netinst.iso
</code></pre>

<p>You then need to find your USB drive.</p>

<pre><code>$ diskutil list
</code></pre>

<p>Look for USB device. I&rsquo;ll use /dev/disk7 for this example. First make sure it is unmounted.</p>

<pre><code>$ diskutil unmountDisk /dev/disk7
</code></pre>

<p>Then copy the image to the USB stick. <strong>CAUTION</strong> This will overwrite anything that is already on the drive.</p>

<pre><code>$ sudo dd if=debian-jessie-DI-rc1-amd64-netinst.img.dmg of=/dev/disk7
</code></pre>

<p>Safely eject the USB disk before using it for booting on your target device.</p>

<pre><code>$ diskutil eject /dev/disk7
</code></pre>

<p>And there you have it, a bootable, Linux install USB drive.</p>

			</div>
			

			<div class="post">
				<h1 class="post-title">
					<a href="http://www.linuxuk.org/post/20150315-trusted-execution-enviroment/">
						Trusted Execution Environments in Android
					</a>
				</h1>

				<span class="post-date">Sun, Mar 15, 2015</span>

				<p>Continuing on from my post about TrustZone it seems that there is a lot of interest in hardware-backed security for Android and what you can do with it. One of the most interesting things that a hardware-isolated area can do for devices, whether that be a dedicated co-processor or technology such as TrustZone, is to provide a trusted enviroment dedicated to protecting your most valuable assets and the operations that are performed on them. Installing something like a micro operating system in this divide can give you a lot of features that the main OS just cannot gain access to and is the thrust of standards bodies such as Global Platform <sup class="footnote-ref" id="fnref:09138b7cb49189c181c90d2842c88c71:1"><a rel="footnote" href="#fn:09138b7cb49189c181c90d2842c88c71:1">1</a></sup>. This micro OS, or to use the popular parlance: a Trusted Execution Environment (TEE), is becoming more important in a world of one-click / swipe / wave-a-device payments and device authorisation and over the coming years will see a surge in popularity not only from independant vendors but from the large OS vendors too. But lets take a step back.</p>

<p>The concept of a Trusted Execution Environment is to provide a secure area of the main processor, memory, and peripherals, that can be used to perform privileged operations. First defined by the Open Mobile Terminal Platform (OMTP) forum in their Advanced Trusted Environment:OMTP TR1 standard <sup class="footnote-ref" id="fnref:09138b7cb49189c181c90d2842c88c71:2"><a rel="footnote" href="#fn:09138b7cb49189c181c90d2842c88c71:2">2</a></sup> and later adopted by Global Platform in their standardisation effort, the TEE has become a bridge between pure software security mechanisms and hardware-only solutions. The TEE uses the concept of isolation that technologies such as TrustZone enable to execute in the processors Secure World mode.</p>

<p>The TEE can be a fully-functional operating system offering software developers the opportunity to create Trusted Applications: applications that reside in the Secure World and perform security-critical functions outside of the control of the main operating system running in the Normal World. An example of such a Trusted Application can be a Trusted User Interface (TUI) - a display that is presented to the user completely protected by the Secure World and inaccessible to the main operating system such as Android. The interface could display sensitive information such as passwords and be confident that attacks such as screen scraping or video buffer capture would not reveal anything.</p>

<p>It is clear that the popularity of TEEs is increasing. Based on one commercial TEE vendors press releases the adoption rate of the Trustonic TEE is reported to be over 100m devices every 6 months (source: <a href="http://www.trustonic.com">http://www.trustonic.com</a> - figures from February 2014 to July 2014) although wide-spread utilisation by third-party developers is yet to be exploited. Ekberg et al <sup class="footnote-ref" id="fnref:09138b7cb49189c181c90d2842c88c71:3"><a rel="footnote" href="#fn:09138b7cb49189c181c90d2842c88c71:3">3</a></sup> attribute this to a lack of access to the TEE stating that <strong><em>&ldquo;Despite TEE’s large-scale deployment, there’s been no widely available means for application developers to benefit from its functionality as mobile device manufacturers have restricted TEE access to their internal use cases.&rdquo;</em></strong>, but also admit that standardisation could potentially solve this issue. Recent announcements by companies such as Linaro point to a more open access model <sup class="footnote-ref" id="fnref:09138b7cb49189c181c90d2842c88c71:4"><a rel="footnote" href="#fn:09138b7cb49189c181c90d2842c88c71:4">4</a></sup> but we are yet to see commercial devices with OP-TEE technology.</p>

<p>In short, TEEs are here to stay and I expect that the likes of Apple and Android will open up access to this trusted area for more developers to enhance the security of their applications in the near future.</p>
<div class="footnotes">

<hr />

<ol>
<li id="fn:09138b7cb49189c181c90d2842c88c71:1"><a href="http://www.globalplatform.org">http://www.globalplatform.org</a>
 <a class="footnote-return" href="#fnref:09138b7cb49189c181c90d2842c88c71:1"><sup>[return]</sup></a></li>
<li id="fn:09138b7cb49189c181c90d2842c88c71:2"><a href="http://www.gsma.com/newsroom/wp-content/uploads/2012/03/omtpadvancedtrustedenvironmentomtptr1v11.pdf">http://www.gsma.com/newsroom/wp-content/uploads/2012/03/omtpadvancedtrustedenvironmentomtptr1v11.pdf</a>
 <a class="footnote-return" href="#fnref:09138b7cb49189c181c90d2842c88c71:2"><sup>[return]</sup></a></li>
<li id="fn:09138b7cb49189c181c90d2842c88c71:3">The Untapped Potential of Trusted Execution Environments on Mobile Devices - Ekberg, J.-E. and Kostiainen, K. and Asokan, N.
 <a class="footnote-return" href="#fnref:09138b7cb49189c181c90d2842c88c71:3"><sup>[return]</sup></a></li>
<li id="fn:09138b7cb49189c181c90d2842c88c71:4"><a href="https://www.linaro.org/blog/core-dump/op-tee-open-source-security-mass-market">https://www.linaro.org/blog/core-dump/op-tee-open-source-security-mass-market</a>
 <a class="footnote-return" href="#fnref:09138b7cb49189c181c90d2842c88c71:4"><sup>[return]</sup></a></li>
</ol>
</div>

			</div>
			

			<div class="post">
				<h1 class="post-title">
					<a href="http://www.linuxuk.org/post/20150226-what-are-you-passionate-about/">
						What are you passionate about?
					</a>
				</h1>

				<span class="post-date">Thu, Feb 26, 2015</span>

				<p>I have recently been reading the book entitled <a href="http://www.amazon.co.uk/gp/product/1447261135/ref=as_li_tl?ie=UTF8&amp;camp=1634&amp;creative=19450&amp;creativeASIN=1447261135&amp;linkCode=as2&amp;tag=jamiedbennett-21&amp;linkId=E3VNI6PKEHUFGQFC">Talk Like TED</a> Carmine Gallo which promises to bestow the virtues of great public speaking upon all who read it. Early on in the book there is a rather salient point that got me thinking, a point that starts with a simple question, &ldquo;What are you passionate about&rdquo;. Now there are quite a few things I am passionate about but in the context of Software Engineering, my chosen career path, it is something that underpins all the great projects that over time I have really enjoyed working on. What is it? <strong>Data</strong>.</p>

<p>I am passionate about data, specifically the conclusions you can draw from it. This is not to say the actual gathering of data, although that can be quite interesting in itself: constructing tools and processes as you squirrel away the nuts of information that together paint a picture that no one individual data point can allude to. I am more passionate about the &lsquo;Wheres Wally&rsquo; dance: the finding of that little something you&rsquo;ve been looking for in a sea of noise, the epiphany, the moment, the unveiling. The answer to the puzzle that is something you intrinsically know is just outside your grasp and that with the data, that collection of measurements and information, the answer will magically appear. The puzzle that is made up of a thousand pieces and by putting them all together it becomes clear. That is what I&rsquo;m passionate about. I guess my career has always followed that route of problem solving.</p>

<p>Software Engineering is a great field to be in if you enjoy problem solving: you get to create a solution based upon parts constructed with only your imagination, a programming language, and your favourite text editor. In my experience, the first solution you produce is often not quite what you were looking for, and the itch remains. You continue to iterate, introduce bugs, fix bugs, thinking of new and novel ways to answer your initial questions and finally you have something that not only works, it satisfies that itch. When you employ this process to scratch a larger itch, a higher-level more abstract problem that requires the gathering and analysis of data I find there is satisfaction from the initial problem solving during development plus the benefit of discovering that pattern or snippet of information that maybe you only thought was there before but now is proven with the data. Maybe this explains why I have an affinity with Pervasive Computing and, in its latest incarnation as a buzz word - Internet of Things (IoT). The topic of Data Inference, that is what I really enjoy.</p>

<p>I&rsquo;ve gathered much data over the years: email achives and usage data, energy monitoring and the subsequent discovery of inefficient appliances, health data with Fitbit and Garmin or lifestyle monitoring with Slogger, it can all be combined to do wonderful things. But there is a tendancy to gather data just of the sake of it and I have certainly been guilty of that but I am starting to take a step back and trust the data more - to make informed decisions based upon it - so lets see how that goes this year. Big data is definately here, but the more important point everyone should be asking is &ldquo;What do we do with all that data and how can it benefit humanity?&rdquo;.</p>

			</div>
			

			<div class="post">
				<h1 class="post-title">
					<a href="http://www.linuxuk.org/post/20150222-trustzone-for-mobile-security/">
						TrustZone For Android Mobile Security
					</a>
				</h1>

				<span class="post-date">Sun, Feb 22, 2015</span>

				<p>Recently I was asked to provide a quick, high-level introduction to TrustZone and how it could potentially improve the security on Android platforms. Any response to this is tricky: TrustZone is just a mechanism built in to a platform that if unused can do very little for device security but when utilised to its fullest, can create a totally seperate environment dedicated to protecting your most important secrets. But first a bit of background.</p>

<p>According to Bloomberg <sup class="footnote-ref" id="fnref:3f08e644941c4bb5b66972dfd4787c48:1"><a rel="footnote" href="#fn:3f08e644941c4bb5b66972dfd4787c48:1">1</a></sup> ARM&rsquo;s chip designs are found in 99% of the world&rsquo;s smartphones and tablets; 2013 alone saw ARM&rsquo;s partners ship over 10 billion chips (source: ARM Strategic Report 2013). Popular devices such as the Apple iPhone and iPad, Amazon&rsquo;s Kindle, and Samsung&rsquo;s flagship Galaxy series all use a Central Processing Unit (CPU) based on an ARM design. In 2004 ARM released its design for a hardware-enforced parallel execution environment for the PB1176 and ARMv7 architectures that was adopted into all later application processor designs.</p>

<p>TrustZone itself is an implementation of device-level security utilizing extensions to the CPU and Advanced Microcontroller Bus Architecture (AMBA), or memory bus. By connecting all these components together in a homogeneous architecture it is possible to contruct two distinct &lsquo;worlds&rsquo;, a &ldquo;<em>Secure World</em>&rdquo; and a &ldquo;<em>Non-Secure World</em>&rdquo; (or &ldquo;<em>Normal World</em>&rdquo;) <sup class="footnote-ref" id="fnref:3f08e644941c4bb5b66972dfd4787c48:2"><a rel="footnote" href="#fn:3f08e644941c4bb5b66972dfd4787c48:2">2</a></sup>. The two modes are orthogonal to each other with the Secure World enjoying full access to all memory regions and priviledged CPU areas whereas the Normal World can be restricted. This arrangement is configured during the boot process. The interface between the two worlds is governed by a special Secure Monitor Mode, accessible via an interrupt instigated with the Secure Monitor Call (SMC) instruction. Identification of which world the processor is currently executing it is possible by the use of a extra &lsquo;flag&rsquo; known as the NS, or Non-Secure bit. All components that wish to use the functionality provided by TrustZone must beaware of this flag.</p>

<p>With TrustZone it is possible to isolate an area of the CPU, memory, and peripherals for use by a trusted software component called a Trusted Execution (TEE) <sup class="footnote-ref" id="fnref:3f08e644941c4bb5b66972dfd4787c48:2"><a rel="footnote" href="#fn:3f08e644941c4bb5b66972dfd4787c48:2">3</a></sup> or other such privileged software. For example, Android&rsquo;s implementation of the core crytographical keystore functionality, <a href="http://developer.android.com/reference/android/security/KeyChain.html">KeyChain</a>, can use hardware components such as TrustZone, Sim Card, or Trusted Platform Module (TPM), to enhance overall security. By using TrustZone a device can provice secure software functionalty, backed up by the hardware it is running on.</p>

<p>It is clear that with more widespread use TrustZone could benefit an increasingly mobile society who expect to do the most secure of operations with their devices.</p>
<div class="footnotes">

<hr />

<ol>
<li id="fn:3f08e644941c4bb5b66972dfd4787c48:1"><a href="http://www.bloomberg.com/bw/articles/2014-02-04/arm-chips-are-the-most-used-consumer-product-dot-where-s-the-money]">http://www.bloomberg.com/bw/articles/2014-02-04/arm-chips-are-the-most-used-consumer-product-dot-where-s-the-money]</a>
 <a class="footnote-return" href="#fnref:3f08e644941c4bb5b66972dfd4787c48:1"><sup>[return]</sup></a></li>
<li id="fn:3f08e644941c4bb5b66972dfd4787c48:2">J. Winter. Trusted computing building blocks for embedded linux-based arm trust- zone platforms. In Proceedings of the 3rd ACM workshop on Scalable trusted com- puting, pages 21–30. ACM, 2008.
 <a class="footnote-return" href="#fnref:3f08e644941c4bb5b66972dfd4787c48:2"><sup>[return]</sup></a></li>
<li id="fn:3f08e644941c4bb5b66972dfd4787c48:2">J. Winter. Trusted computing building blocks for embedded linux-based arm trust- zone platforms. In Proceedings of the 3rd ACM workshop on Scalable trusted com- puting, pages 21–30. ACM, 2008.
 <a class="footnote-return" href="#fnref:3f08e644941c4bb5b66972dfd4787c48:2"><sup>[return]</sup></a></li>
</ol>
</div>

			</div>
			

			<div class="post">
				<h1 class="post-title">
					<a href="http://www.linuxuk.org/post/20150218-more-blogging/">
						Getting back into blogging
					</a>
				</h1>

				<span class="post-date">Wed, Feb 18, 2015</span>

				<p>Its been a while, in fact it has been around a year since I updated this site (to be fair I did write a few posts on another blog during that period &hellip; <em>excuses</em>, <em>excuses</em>) which I attribute to a increasingly busy schedule but more to a lack of enthusiasm. So, in an attempt to get back into this blogging lark I thought it would be a good opportunity to redesign the site with <a href="http://gohugo.io/">Hugo</a>, a static, but more importantly Markdown-based web engine, and put up a few articles on something dear to my heart, Software Engineering. So expect more development related posts interspersed with running, triathlon, travel, and other randomness as I attept to do this on a semi-regular basis.</p>

<p>Oh, and if you are looking for any of my past entries from 2007 onwards, they will be back up shortly as I figure out how to convert WordPress content to Hugo and still keep some form resemblence to the original post.</p>

			</div>
			
		</div>
	</div>
  </body>
</html>
